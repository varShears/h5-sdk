!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self)["npmpackage-name"]=n()}(this,function(){"use strict";return function(){function e(e,n){console.log(n),this.config=n,this.uploadUrl=e,this.nowLocation=null,this.broswer=null,this.sys=null,this.app=null,this.u=null,this.broswerVersion=null,this.broswerLang=null,this.deviceBrowser=null,this.deviceDetail=null,this.uploadMsg=null}var n=e.prototype;return n.init=function(){!function(n){document.addEventListener("mousedown",function(e){console.log(e);e={sys:{broswer:n.broswer,browserLang:n.broswerLang,broswerVersion:n.broswerVersion,sys:n.sys},et:{auth:n.getAuthMessage(),evtTime:(new Date).getTime(),evtType:"click",evtPath:n.nowLocation}};n.uploadMsg=e}),n.nowLocation=location,console.log(n.nowLocation),console.log(n.getOSAndBrowser());var e=n.getOSAndBrowser().split("/");n.broswer=e[1],n.sys=e[0],n.broswerVersion=e[2],n.getDeviceMessage(),e=n.getAuthMessage(),console.log(e)}(this)},n.getDeviceMessage=function(){!function(e){var n,o=navigator.userAgent,i=navigator.appVersion,s=(navigator.browserLanguage||navigator.language).toLowerCase(),t={trident:-1<o.indexOf("Trident"),presto:-1<o.indexOf("Presto"),webKit:-1<o.indexOf("AppleWebKit"),gecko:-1<o.indexOf("Gecko")&&-1===o.indexOf("KHTML"),mobile:!!o.match(/AppleWebKit.*Mobile.*/),ios:!!o.match(/\(i[^;]+;( U;)? CPU.Mac OS X/),android:-1<o.indexOf("Android")||-1<o.indexOf("Linux"),iPhone:-1<o.indexOf("iPhone"),iPad:-1<o.indexOf("iPad"),webApp:-1===o.indexOf("Safari"),weixin:-1<o.indexOf("MicroMessenger"),qq:" qq"===o.match(/\sQQ/i)};for(n in t)t[n]&&(e.deviceBrowser=n);console.log("u",o),console.log("app",i),console.log("browserLang",s),console.log("deviceBrowser",e.deviceBrowser),e.app=i,e.u=o,e.broswerLang=s}(this)},n.start=function(){this.sendMsg()},n.sendMsg=function(){var e,n,o;e=this,n=new XMLHttpRequest,o=e.url,n.setRequestHeader("Content-Type","application/json"),n.open("POST",o,!0),n.send(JSON.stringify(e.uploadMsg))},n.getOSAndBrowser=function(){!function(){var e=navigator.platform,n=navigator.userAgent;console.log(n);var o="";-1<e.indexOf("Win")?-1<n.indexOf("Windows NT 5.0")||(-1<n.indexOf("Windows NT 5.1")||(-1<n.indexOf("Windows NT 5.2")||(-1<n.indexOf("Windows NT 6.0")||(-1<n.indexOf("Windows NT 6.1")||-1<n.indexOf("Windows 7")||(-1<n.indexOf("Windows NT 6.2")||-1<n.indexOf("Windows NT 6.3")||-1<n.indexOf("Windows 8")||(-1<n.indexOf("Windows NT 6.4")||n.indexOf("Windows NT 10"))))))):-1<e.indexOf("Mac")||(-1<e.indexOf("X11")||e.indexOf("Linux")),/[Ff]irefox(\/\d+\.\d+)/.test(n)?((o=/([Ff]irefox)\/(\d+\.\d+)/.exec(n))[1],o[2]):/[Tt]rident(\/\d+\.\d+)/.test(n)?("7.0"===(o=/([Tt]rident)\/(\d+\.\d+)/.exec(n))[2]?o[2]="11":"6.0"===o[2]?o[2]="10":"5.0"===o[2]?o[2]="9":"4.0"===o[2]&&(o[2]="8"),o[1]="IE",o[1],o[2]):/[Cc]hrome\/\d+/.test(n)?((o=/([Cc]hrome)\/(\d+)/.exec(n))[1],o[2]):/[Vv]ersion\/\d+\.\d+\.\d+(\.\d)* *[Ss]afari/.test(n)?((o=/[Vv]ersion\/(\d+\.\d+\.\d+)(\.\d)* *([Ss]afari)/.exec(n))[3],o[1]):/[Oo]pera.+[Vv]ersion\/\d+\.\d+/.test(n)&&((o=/([Oo]pera).+[Vv]ersion\/(\d+)\.\d+/.exec(n))[1],o[2])}()},n.getAuthMessage=function(){!function(e){var n=e.config,e=n.authType,o=n.authName;if("cookie"!==e)return"sessionStorage"===e?sessionStorage.getItem(o):"localStorage"===e&&localStorage.getItem(o);for(var i=document.cookie.split("; "),s=0;s<i.length;s++){var t=i[s].split("=");if(t[0]===o)return t[1]}}(this)},n.handleEvent=function(e,n){n={sys:{broswer:this.broswer,browserLang:this.broswerLang,broswerVersion:this.broswerVersion,sys:this.sys},et:{auth:this.getAuthMessage(),evtTime:(new Date).getTime(),evtType:e,evtPath:this.nowLocation,others:n}};this.uploadMsg=n,this.sendMsg()},e}()});
